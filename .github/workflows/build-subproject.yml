# Builds the react project in a way that Jekyll can understand
name: Build Subdirectory  Project

on:
    workflow_call:
        inputs:
            working-directory:
                required: true
                type: string
            build-folder:
                required: false
                type: string
                default: "build"

jobs:
    reusable-job:
        runs-on: ubuntu-latest
        defaults:
            run:
                working-directory: ${{ inputs.working-directory }}
        steps:
            - name: Checkout code
              uses: actions/checkout@v2

            - name: Run script in specified directory
              run: |
                  echo "Building project in directory: ${{ inputs.working-directory }}"
                  npm install
                  npm run build
                  shopt -s extglob
                  rm -rf !(build)
                  mv build/* ./
                  rm -rf build
